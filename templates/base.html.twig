<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{% block title %}Welcome!{% endblock %}</title>
        <meta name="description" content="{% block meta %}Description!{% endblock %}">
        <meta name="robots" content="{% block index %}index, follow{% endblock %}">

        <link rel="icon" href="{{ asset('img/logo.png') }}" type="image/png" >

        {# Font Awesome #}
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer">
        
        {# Remixicon #}
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/3.6.0/remixicon.css" integrity="sha512-GL7EM8Lf8kU23I3kTio2kRWt8YRDVIQcSZjRVtVRfk05kB/QvkyafuTC94Ev0X6qk7Z0r5s06c1lsP1p/ezDYw==" crossorigin="anonymous" referrerpolicy="no-referrer">
        
        {# Font Google #}
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link
        href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=M+PLUS+1+Code:wght@100..700&display=swap"
        rel="stylesheet">
    
      <script src="https://kit.fontawesome.com/7252ea4d54.js" crossorigin="anonymous"></script>
        
        {% block stylesheets %}
        <link rel="stylesheet" href="{{asset('css/styles.css')}}">
        <link rel="stylesheet" href="{{asset('css/general.css')}}">
        <link rel="stylesheet" href="{{asset('css/component.css')}}">
        <link rel="stylesheet" href="{{asset('css/settings.css')}}">
        <link rel="stylesheet" href="{{asset('css/layout.css')}}">
        <link rel="stylesheet" href="{{asset('css/homePage.css')}}">
        <link rel="stylesheet" href="{{asset('css/user.css')}}">
        <link rel="stylesheet" href="{{asset('css/photographerPages.css')}}">
        <link rel="stylesheet" href="{{asset('css/events.css')}}">
        <link rel="stylesheet" href="{{asset('css/formPages.css')}}">
        <link rel="stylesheet" href="{{asset('css/indexPages.css')}}">
        <link rel="stylesheet" href="{{asset('css/managePages.css')}}">
        {% endblock %}

        {% block javascripts %}
        <script src= "{{ asset('js/main.js') }}"></script>
        <script src= "{{ asset('js/gsap.min.js') }}"></script>
        <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
        
        {% endblock %}
    </head>

    <body>


      <header>

        {#<a href="index.php?action=accueil">
            <figure id="logo-container">
                <img src="{{ asset('img/logo.png') }}" alt="logo1">
              <figcaption>
                class="{% if app.request.attributes.get('_route') == 'app_home' %}active{% endif %}">
                    <a href="{{ path('app_home') }}">Photoclub</a>
                
              </figcaption>
            </figure>
        </a>

        {#   --NAVBAR-- */#}
        <nav>
         



            <ul>  
                <li class="link"><a href="{{ path('app_photographer') }}">GALLERY</a></li>
                <li class="link"><a href="{{ path('app_event') }}">EVENTS</a></li>
                <li class="link"><a href="{{ path('app_schedule') }}">SCHEDULE</a></li>
                <li class="link"><a href="{{ path('app_contact')}}">CONTACT</a></li>
            
            <div id="close-button">
                    <i class="fa-solid fa-x"></i>
            </div> 
              
            

            <div id="user-interface">
                {% if app.user %}
                    <div class="dropdown">
                        <span><i class="ri-user-4-fill"></i></span>
                        <div class="dropdown-content">
                            <p><a href="{{ path('show_user', {slug: app.user.email }) }}">PROFIL</a></p>

                            {% if is_granted('ROLE_PHOTOGRAPHER') %}
                            <p><a href="{{ path('manage_profil', {slug: app.user.email }) }}">USER PAGE</a></p>
                            {% endif %}
                            {% if is_granted('ROLE_ADMIN') %}
                            <p><a href="{{ path('app_dashboard')}}">DASHBOARD</a></p>
                            {% endif %}
                            <p><a href=" {{ path('app_logout') }}"><i class="fa-solid fa-right-from-bracket"></i> LOGOUT</a></p>
                        </div>
                    </div>
                {% else %} 
                <div class="dropdown">
                    <span ><i class="ri-login-circle-line"  ></i></span>
                    <div class="dropdown-content">
                        <p><a href="{{ path('app_login') }}">LOG ON</a></p>
                        <p><a href="{{ path('app_register') }}">REGISTER</a></p>
                    </div>
                </div>
                {% endif %}
            </div>

            </ul>
 
            <div id="toggle-menu">
                <i class="fa-solid fa-bars"></i>
            </div>                              

            <div class="nav-menu">
                
                <a href="#">
                    <div></div>
                    <div></div>
                    <div></div>
                </a>
            </div>
        </nav>

      </header>

        
        {#   --ASIDE-- */#}
        <aside id="aboutUs">
            <div>
                <h3>PHOTOCLUB</h3>

                <p>This is the club of professional photographers, students and simply amateurs taking part in events, publishing their photos and inspiring one other.</p>
                <div class='button btn4'>************************</div>
                {# <div class="socials">
                    <a href="https://www.facebook.com"><i class="fa-brands fa-facebook"></i></a>
                    <a href="https://www.twitter.com"><i class="fa-brands fa-square-twitter"></i></a>
                    <a href="https://www.instagram.com"><i class="fa-brands fa-instagram"></i></a>
                </div>*/#}
            </div>
        </aside>

        {#   --CONTENT-- */#}

        <div class="roles" style="display:none;">
        
     
            {% if is_granted('ROLE_PHOTOGRAPHER') %}
            {# If the user has the "ROLE_PHOTOGRAPHER" role, redirect to photographer's page management #}
            <a href="{{ path('manage_profil', {slug: app.user.slug }) }}"><i class="fa-solid fa-palette"></i></a>
            {% elseif is_granted('IS_AUTHENTICATED_FULLY') %}
            {% endif %}
            
            {% if app.user %}
            {# <a href="{{ path('app_subscription')}}"><i class="ri-bard-fill"></i></a> #}
            <a href="{{ path('app_home') }}"><i class="fa-solid fa-palette"></i></a>
            {% endif %}
         
        </div>

            {% for message in app.flashes('success') %}
            <div class="alert alert-success">
                <i class="fa-regular fa-circle-check"></i>
                <p>Success ! {{ message }}</p>
            </div>
            {% endfor %} 

            {% for message in app.flashes('error') %}
            <div class="alert alert-error">
                <i class="fa-regular fa-circle-xmark"></i>
                <p>Error ! {{ message }}</p> 
            </div>
            {% endfor %} 
    
 
            
        <div class="main">
            {% block body %}
            {% endblock %}
        </div>

        <div id="back-top-btn"></div>
      

        {#   --FOOTER-- */#}

        <footer class="footer">
            <div id="footerContainer">
                <div>
                    <a href="#">
                      <figure id="logo-container">
                        <img src="{{ asset('img/logo.png') }}" alt="logo2">
                        <figcaption>
                          Photoclub
                        </figcaption>
                      </figure>
                    </a>
            
                    <p id="footerDescription">
                      We admire the photography!
                    </p>
                  </div>
    
                <div id="footer-links">
                    <a href="{{ path('app_home')}}">HOME</a>
                    <a href="{{ path('app_home')}}">ABOUT US</a>
                   {#  <a href="{{ path('app_contact')}}">CONTACT</a> */#}
                </div>
    
                <div id="footer-links-conditions">
                    {# 
                    <a href="{{ path('app_terms_of_use')}}">Terms of Use</a>
                    <a href="{{ path('app_privacy_policy')}}">Privacy Policy</a>
                    <a href="{{ path('app_sitemap')}}">Sitemap</a> */#}
                    
                </div>
    
                <p class="copy link">
                     <small style="font-size: 1.2rem;">©</small>  <span id="footer-date"></span> <span id="name-rights">Photoclub</span>. All pictures of this site are free of copywrite </a>
                    
                </p>
    
                <div class="socials" id="footer-socials">
                    <a href="https://www.facebook.com"><i class="fa-brands fa-facebook "></i></a>
                    <a href="https://www.twitter.com"><i class="fa-brands fa-square-twitter"></i></a>
                    <a href="https://www.instagram.com"><i class="fa-brands fa-instagram"></i></a>
                </div> 
 
            </div>

            <div id="image-footer">
                <img src="{{ asset('img/visuals/footer.jpg') }}" alt="">
            </div>
            
        </footer>


    {#/*  --SCRIPT-- */#}

    {# MenuBurger #}
        <script src="{{ asset('js/menuBurger.js') }}"></script>

    {# MenuBurger #}
    <script src="{{ asset('js/carousel.js') }}"></script>        

    {# Jquery #}
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="{{ asset('js/main.js') }}"></script>
    <script src="{{ asset('js/gwl.js') }}"></script>

    {# FullCalendar #}
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar/index.global.min.js'></script>
    <script src="{{ asset('js/calendar.js') }}"></script>
    <script src="https://unpkg.com/scrollama"></script>

    {# Gsap #}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollTrigger.min.js"></script>
    
    <script>
        $(document).ready(function() {

            // switch pattern footer depending on the body color
            var bodyBgColor = $('body').css('background-color');
    
            if (bodyBgColor.includes("21")) { 
                $('#top-footer').css('background-image', "url('/images/visuals/film-strip-on.webp')");
            } else if (bodyBgColor.includes("249")) { 
                $('#top-footer').css('background-image', "url('/images/visuals/film-strip.webp')");
            }


            // add a color on links in the navbar
            var currentUrl = window.location.href;
            $('nav p a').each(function() {
                var href = $(this).attr('href');
                if (currentUrl.includes(href)) {
                    $(this).addClass("highlight");
                }
            });
            
            
            // show menu burger + animation for the links in the hamburger menus
            $('#burger-icon').click(function() {
                $('#mobile-header').toggleClass('nav-active');
            
                // Select all links within '.nav-links'
                $('#mobile-header .nav-links a').each(function(index) {
                    var link = $(this);
            
                    // Reset the color of the links when hiding them
                    if ($('#mobile-header').hasClass('nav-active')) {
                        setTimeout(function() {
                            link.css('color', '#F9F9F9'); 
                        }, 200 + index * 100); // Start after 200ms, then increase by 200ms for each link
                    } else {
                        link.css('color', '#151515'); // Reset the color of the link
                    }
                });
            })

            
        });

        setTimeout(function() {
            gsap.to(".name-app", {
                keyframes: [
                    { backgroundPosition: "100% 0%", ease: "none", duration: 0 }, 
                    { backgroundPosition: "0% 0%", ease: "none", duration: 0.5 }, 
                    { backgroundPosition: "100% 0%", ease: "none", duration: 1 } 
                ],
                repeat: -1, // infinite repeat
                repeatDelay: 8 // seconds between repetition
            });
        }, 2000);


        if(document.querySelector('.breadcrumb')) {
            gsap.from(".breadcrumb", {
                opacity: 0, 
                duration: 1.2, 
                ease: "easeInOut", 
                delay: 1.2
            });

        }

        // animation background footer on scroll
        document.addEventListener("DOMContentLoaded", function() {
            gsap.set("#top-footer", {opacity: 0}); 
            gsap.set("#image", {opacity: 0}); 
            const footerAnimation = gsap.timeline({
            scrollTrigger: {
                trigger: "#top-footer",
                start: "top 60%",
                end: "bottom 40%",
                //markers: true
            }
            });
    
            footerAnimation.to("#top-footer", {
            opacity: 1,
            ease: "power4.out",
            delay: 0.3,
            onComplete: function() {
                gsap.to("#image-footer img", {
                opacity: 1,
                ease: "power4.out",
                delay: 0.1,
                });
            }
            });
        });
            
        // aside modale
        $(document).ready(function() {
            var isClicked = false;
        
            $('.nav-menu a').click(function() {
                if (!isClicked) {
                    // 1° fois que l'élément est cliqué
                    $('.nav-menu a div').css('background-color', '#FFFFFF');
                    $('.nav-menu a div:nth-child(1)').css('transform', 'translateY(0.55rem) rotate(-45deg)');
                    $('.nav-menu a div:nth-child(2)').css('transform', 'rotate(45deg)');
                    $('.nav-menu a div:nth-child(3)').css('transform', 'translateY(-0.5rem) rotate(-45deg)');
                    $('aside').css('right', '0');
                } else {
                    // Deuxième fois que l'élément est cliqué (réinitialiser)
                    $('.nav-menu a div').css('background-color', '');
                    $('.nav-menu a div').css('transform', '');
                    $('aside').css('right', '-28rem');
                }
        
                // Inverser l'état de la variable isClicked
                isClicked = !isClicked;
            });

            // date (footer)
            var currentYear = new Date().getFullYear();
            $('#footer-date').text(currentYear);
    
        
        });

        // back-to-top button
        var btn = $('#back-top-btn');
        // When the user scrolls the page
        $(window).scroll(function() {
        // If the scroll position is greater than 300 pixels
        if ($(window).scrollTop() > 300) { 
            btn.addClass('show'); // Show the button
        } else {
            btn.removeClass('show'); // hide the button
        }
        });
        // When the button is clicked
        btn.on('click', function(e) {
        // Prevent the default click behavior
        e.preventDefault();
        // Animation to scroll the page to the top (300ms)
        $('html, body').animate({scrollTop:0}, '300');
        });
                

        // animation text banner 
         // Ajouter la classe "visible" au titre du header pour déclencher l'animation
        $('.banner-title').addClass('visible');
        $('.banner-text').addClass('visible');


        if(document.querySelector('.banner')) {
            gsap.from(".banner", {
                opacity: 0,
                duration: 2,
                ease: "easeInOut", 
                delay: 0.6
            });
        }
        
    
    </script>
    </body>

</html>
